<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">












    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            LDAP安装和基本管理手记 | 
        
        NeverSec的博客 | 安全不止
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no">
    <meta name="description" itemprop="description" content="OpenLDAP 是轻型目录访问协议（Lightweight Directory Access Protocol，LDAP）的自由和开源的实现，在其OpenLDAP许可证下发行，并已经被包含在众多流行的 Linux 发行版中。这里记录下如何安装和基本的管理操作。">
    <meta name="keywords" content="渗透测试,Linux">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?YnKWKi7Llh7tGEKEFvFvpQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/tranquil-heart.min.css?ul3p9I9MsbOxK0L+BHzDDg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","https://cdn.bootcss.com/jquery/2.2.1/jquery.js", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="NeverSec的博客 | 安全不止">
    <meta name="msapplication-starturl" content="https://leezj9671.github.io/20180329/LDAP安装和基本管理手记.html">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="NeverSec的博客 | 安全不止">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://leezj9671.github.io/20180329/LDAP安装和基本管理手记.html">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="LDAP安装和基本管理手记 | NeverSec的博客 | 安全不止">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="OpenLDAP 是轻型目录访问协议（Lightweight Directory Access Protocol，LDAP）的自由和开源的实现，在其OpenLDAP许可证下发行，并已经被包含在众多流行的 Linux 发行版中。这里记录下如何安装和基本的管理操作。">
    <meta property="og:article:tag" content="Linux"> 

    
        <meta property="article:published_time" content="Thu Mar 29 2018 18:43:11 GMT+0800">
        <meta property="article:modified_time" content="Tue Apr 09 2019 13:50:39 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://leezj9671.github.io/20180329/LDAP安装和基本管理手记.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://leezj9671.github.io/20180329/LDAP安装和基本管理手记.html",
    "headline": "LDAP安装和基本管理手记",
    "datePublished": "Thu Mar 29 2018 18:43:11 GMT+0800",
    "dateModified": "Tue Apr 09 2019 13:50:39 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "n3ver",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "博客搭建中……,Hacking is No Limited"
    },
    "publisher": {
        "@type": "Organization",
        "name": "NeverSec的博客 | 安全不止",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",Linux渗透测试",
    "description": "OpenLDAP 是轻型目录访问协议（Lightweight Directory Access Protocol，LDAP）的自由和开源的实现，在其OpenLDAP许可证下发行，并已经被包含在众多流行的 Linux 发行版中。这里记录下如何安装和基本的管理操作。",
}
</script>


    

    <!-- Analytics -->
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?b3c4d22f885f6f353c15234e03abe245';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    
        <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=UA-137586292-1&web_id=UA-137586292-1" language="JavaScript"></script>
</div>
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#环境准备"><span class="post-toc-number">1.</span> <span class="post-toc-text">环境准备</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装Berkeley-DB"><span class="post-toc-number">2.</span> <span class="post-toc-text">安装Berkeley DB</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#更新lib库"><span class="post-toc-number">3.</span> <span class="post-toc-text">更新lib库</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装LDAP"><span class="post-toc-number">4.</span> <span class="post-toc-text">安装LDAP</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置可执行命令"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">设置可执行命令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#conf配置"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">conf配置</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#启动"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">启动</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#测试导入"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">测试导入</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Migrationtools"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">Migrationtools</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#管理工具"><span class="post-toc-number">5.</span> <span class="post-toc-text">管理工具</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#LDAP-Administrator"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">LDAP Administrator</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PhpLdapAdmin"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">PhpLdapAdmin</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#注意点"><span class="post-toc-number">5.2.1.</span> <span class="post-toc-text">注意点</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#LDAP客户端"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">LDAP客户端</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考"><span class="post-toc-number">6.</span> <span class="post-toc-text">参考</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 15 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                LDAP安装和基本管理手记
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar">
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>n3ver</strong>
        <span>3月 29, 2018</span>
    </div>

    <div class="section-spacer"></div>
    
    <i class="material-icons">keyboard</i><span class="post-count" style="margin-right:5px">本文共:2.1k字  </span>
    <i class="material-icons">query_builder</i><span class="post-count">阅读时间≈10分  </span>
    
    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Linux/">Linux</a>
    </li></ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=LDAP安装和基本管理手记&url=https://leezj9671.github.io/20180329/LDAP安装和基本管理手记.html&pic=https://leezj9671.github.io/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=NeverSec的博客 | 安全不止&title=LDAP安装和基本管理手记&summary=网络安全,渗透测试,CTF&pics=https://leezj9671.github.io/img/favicon.png&url=https://leezj9671.github.io/20180329/LDAP安装和基本管理手记.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>OpenLDAP 是轻型目录访问协议（Lightweight Directory Access Protocol，LDAP）的自由和开源的实现，在其OpenLDAP许可证下发行，并已经被包含在众多流行的 Linux 发行版中。这里记录下如何安装和基本的管理操作。</p>
<a id="more"></a>
<h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>以下操作均为CentOS 7</p>
<ol>
<li>关闭SELINUX</li>
<li>打开防火墙tcp 389 / 636端口或者关闭防火墙</li>
</ol>
<blockquote>
<p>tcp 389 是openldap 明文传输端口，tcp 636是ssl加密传输的端口。</p>
</blockquote>
<blockquote>
<p>centos7默认自带firewalld服务，可以停用之后安装iptables</p>
</blockquote>
<pre><code class="bash">sed -i &#39;/SELINUX/s/enforcing/disabled/&#39; /etc/selinux/config &amp;&amp; setenforce 0 &amp;&amp; systemctl disable firewalld.service &amp;&amp; systemctl stop firewalld.service
</code></pre>
<h2 id="安装Berkeley-DB"><a href="#安装Berkeley-DB" class="headerlink" title="安装Berkeley DB"></a>安装Berkeley DB</h2><blockquote>
<p>在LDAP的README中标注了适用版本<code>BDB and HDB backends require Oracle Berkeley DB 4.4 - 4.8, or 5.0 - 5.1</code></p>
</blockquote>
<pre><code class="bash">yum -y install gcc gcc-c++ 
tar -xvf db-5.1.29.tar.gz -C /usr/local/src
cd /usr/local/src/db-5.1.29/build_unix
../dist/configure --prefix=/data/server/berkeleydb
make &amp;&amp; make install
ln -s /data/server/berkeleydb/include/* /usr/include/
ln -s /data/server/berkeleydb/lib/* /usr/local/lib64/
echo &quot;/data/server/berkeleydb/lib&quot; &gt;&gt;/etc/ld.so.conf
ldconfig -f /etc/ld.so.conf
</code></pre>
<h2 id="更新lib库"><a href="#更新lib库" class="headerlink" title="更新lib库"></a>更新lib库</h2><pre><code class="bash">#保证在后面编译openldap时能找到lib和include下的库
echo &quot;/data/server/berkeleydb/lib/&quot; &gt; /etc/ld.so.conf
ldconfig -v
</code></pre>
<h2 id="安装LDAP"><a href="#安装LDAP" class="headerlink" title="安装LDAP"></a>安装LDAP</h2><pre><code class="bash">yum install *ltdl* -y
yum -y install gcc gcc-c++ unzip gzip bzip2 openssl-devel cyrus-sasl-devel krb5-devel tcp_wrappers-devel libtool-ltdl-devel openslp-devel unixODBC-devel mysql-devel

tar zxvf openldap-2.4.46.tgz -C /usr/local/src
cd /usr/local/src/openldap-2.4.46

./configure --prefix=/data/server/openldap \
--enable-slapd \
--enable-dynacl  \
--enable-aci \
--enable-cleartext \
--enable-crypt  \
--enable-lmpasswd \
--enable-spasswd \
--enable-modules \
--enable-rewrite \
--enable-rlookups \
--enable-slapi \
--enable-wrappers \
--enable-backends \
--enable-ndb=no \
--enable-perl=no \
--enable-overlays \
CPPFLAGS=-I/data/server/berkeleydb/include/ \
LDFLAGS=-L/data/server/berkeleydb/lib/

make depend
make
#make test
make install
</code></pre>
<h3 id="设置可执行命令"><a href="#设置可执行命令" class="headerlink" title="设置可执行命令"></a>设置可执行命令</h3><pre><code class="bash">cp -a /data/server/openldap/share/man/* /usr/share/man/
ln -s /data/server/openldap/bin/* /usr/local/bin
ln -s /data/server/openldap/sbin/* /usr/local/sbin
</code></pre>
<h3 id="conf配置"><a href="#conf配置" class="headerlink" title="conf配置"></a>conf配置</h3><pre><code class="bash">slappasswd -s 123456
    {SSHA}4Nxxxxxxxxxx5xxxxxAu2c
# 复制密码到conf中

vim /data/server/openldap/etc/openldap/slapd.conf
# 添加如下几行
include        /data/server/openldap/etc/openldap/schema/collective.schema
include        /data/server/openldap/etc/openldap/schema/corba.schema
include        /data/server/openldap/etc/openldap/schema/cosine.schema
include        /data/server/openldap/etc/openldap/schema/duaconf.schema
include        /data/server/openldap/etc/openldap/schema/dyngroup.schema
include        /data/server/openldap/etc/openldap/schema/inetorgperson.schema
include        /data/server/openldap/etc/openldap/schema/java.schema
include        /data/server/openldap/etc/openldap/schema/misc.schema
include        /data/server/openldap/etc/openldap/schema/nis.schema
include        /data/server/openldap/etc/openldap/schema/openldap.schema
include        /data/server/openldap/etc/openldap/schema/pmi.schema
include        /data/server/openldap/etc/openldap/schema/ppolicy.schema

#新增日志文件级别与路径，需要在编译时--enable-debug，否则日志文件输出，不影响调试模式;
loglevel    256
logfile    /data/server/openldap/var/slapd.log

#修改域名及管理员账户名;
suffix        &quot;dc=sys,dc=com&quot;
rootdn        &quot;cn=admin,dc=sys,dc=com&quot;

#使用密文密码，即前面使用slappasswd生成的密文;
rootpw        {SSHA}K9+WKxxxxxxxxxxxxxxxxx
</code></pre>
<p>LDAP连接服务器的连接字串格式为：ldap://servername/DN   </p>
<p>其中DN有三个属性，分别是CN,OU,DC   </p>
<ul>
<li>dc:”domainComponent”，也就是域名的组成部分，准确的说是主机域名的后缀组成部分，如果这里的配置与你的主机域名不对应的话，服务一般是启动不了的。</li>
<li>CN=Common Name 为用户名或服务器名，最长可以到80个字符，可以为中文；</li>
<li>OU=Organization Unit为组织单元，最多可以有四级，每级最长32个字符，可以为中文；</li>
<li>O=Organization 为组织名，可以3—64个字符长</li>
<li>C=Country为国家名，可选，为2个字符长<br>LDAP目录以一系列“属性对”的形式来存储记录项，每一个记录项包括属性类型和属性值（这与关系型数据库用行和列来存取数据有根本的不同）。</li>
</ul>
<p>例如：CN=test,OU=developer,DC=domainname,DC=com </p>
<p>在上面的代码中 cn=test 可能代表一个用户名，ou=developer 代表一个 active directory 中的组织单位。这句话的含义可能就是说明 test 这个对象处在domainname.com 域的 developer 组织单元中</p>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><pre><code class="bash">/data/server/openldap/libexec/slapd
# 前台输出
/data/server/openldap/libexec/slapd -d 256
</code></pre>
<h3 id="测试导入"><a href="#测试导入" class="headerlink" title="测试导入"></a>测试导入</h3><pre><code class="bash">vim test.ldif

dn: dc=sys,dc=com
objectclass: dcObject
objectclass: organization
o: SYS.Inc
dc: sys

dn: cn=admin,dc=sys,dc=com
objectclass: organizationalRole
cn: admin


ldapadd -x -D &quot;cn=admin,dc=sys,dc=com&quot; -W -f test.ldif
</code></pre>
<h3 id="Migrationtools"><a href="#Migrationtools" class="headerlink" title="Migrationtools"></a>Migrationtools</h3><pre><code class="bash">yum -y install migrationtools
/usr/share/migrationtools/migrate_base.pl &gt; /root/base.ldif
/usr/share/migrationtools/migrate_group.pl /etc/group /root/group.ldif
/usr/share/migrationtools/migrate_group.pl /etc/passwd /root/users.ldif
# 修改域信息
vim /root/base.ldif
vim /root/group.ldif
vim /root/users.ldif
# 修改ou和dc，按需
    :%s/ou=Group/cn=People
    :%s/dc=padl/dc=sys
# 生成的文件需要修改里面的dn信息，否则服务器会拒绝执行
ldapadd -c -x -D &quot;cn=admin,dc=sys,dc=com&quot; -W -f /root/base.ldif
ldapadd -c -x -D &quot;cn=admin,dc=sys,dc=com&quot; -W -f /root/group.ldif
ldapadd -c -x -D &quot;cn=admin,dc=sys,dc=com&quot; -W -f /root/users.ldif
</code></pre>
<p>导入完后到管理工具查看</p>
<p><img src="https://i.loli.net/2018/03/28/5abaf0de8323b.jpg" alt></p>
<h2 id="管理工具"><a href="#管理工具" class="headerlink" title="管理工具"></a>管理工具</h2><h3 id="LDAP-Administrator"><a href="#LDAP-Administrator" class="headerlink" title="LDAP Administrator"></a>LDAP Administrator</h3><ol>
<li>在 <a href="https://www.ldapadministrator.com/download.htm" target="_blank" rel="noopener">https://www.ldapadministrator.com/download.htm</a> 下载管理工具</li>
<li>安装完成后，打开LDAP Administrator 2017</li>
<li>如下点击<code>New</code>新建一个profile，或者<code>Ctrl+P</code></li>
</ol>
<p><img src="https://i.loli.net/2018/03/28/5abaee94d0187.jpg" alt></p>
<ol start="4">
<li>输入profile name，点击下一步</li>
</ol>
<p><img src="https://i.loli.net/2018/03/28/5abaef04b96a1.jpg" alt></p>
<ol start="4">
<li>在<code>Host</code>输入服务端地址，其他保持默认，点击下一步</li>
</ol>
<p><img src="https://i.loli.net/2018/03/28/5abaef55ace3e.jpg" alt></p>
<ol start="5">
<li>选择<code>other credentials-pricipal</code>输入设置的域，如<code>cn=admin,dc=sys,dc=com</code>，输入设置的密码，点击下一步</li>
</ol>
<p><img src="https://i.loli.net/2018/03/28/5abaeffa2e2cf.jpg" alt></p>
<ol start="6">
<li><code>Filter</code>保持默认，点击完成即可</li>
</ol>
<p><img src="https://i.loli.net/2018/03/28/5abaf04b03be5.jpg" alt></p>
<blockquote>
<p>如果熟悉配置，可以使用更轻量级的工具LDAP admin<br><img src="https://mmbiz.qpic.cn/mmbiz_png/AtP0DxfwGB7E42KCOhKuqQVhpZDTib0eRVxCeQy8YibvkpMcicTqxzeBhupSP5eSqibWfEiazrsVjiaDFUfKV83qeuvw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt></p>
</blockquote>
<h3 id="PhpLdapAdmin"><a href="#PhpLdapAdmin" class="headerlink" title="PhpLdapAdmin"></a>PhpLdapAdmin</h3><pre><code class="bash">yum -y install epel-release
yum -y install httpd
yum -y install phpldapadmin

vim /etc/httpd/conf.d/phpldapadmin.conf

Alias /phpldapadmin /usr/share/phpldapadmin/htdocs
Alias /ldapadmin /usr/share/phpldapadmin/htdocs

&lt;Directory /usr/share/phpldapadmin/htdocs&gt;
  &lt;IfModule mod_authz_core.c&gt;
    # Apache 2.4
    Require all granted
    Allow from all
  &lt;/IfModule&gt;
  &lt;IfModule !mod_authz_core.c&gt;
    # Apache 2.2
    Order Deny,Allow
    Allow from all
  &lt;/IfModule&gt;
&lt;/Directory&gt;

vim /etc/phpldapadmin/config.php 
# 去掉注释 并注释原来的配置
$servers-&gt;setValue(&#39;login&#39;,&#39;attr&#39;,&#39;dn&#39;);
//$servers-&gt;setValue(&#39;login&#39;,&#39;attr&#39;,&#39;uid&#39;);

#重启服务
systemctl restart httpd
</code></pre>
<p>访问 <a href="http://ip/ldapadmin，点击登陆。CN填写域信息`cn=admin,dc=sys,dc=com`，密码填写自己设置的密码。" target="_blank" rel="noopener">http://ip/ldapadmin，点击登陆。CN填写域信息`cn=admin,dc=sys,dc=com`，密码填写自己设置的密码。</a></p>
<h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><ol>
<li>在ldapadmin管理中添加用户注意配置shell，默认为nologin</li>
<li>yum安装的版本会出现展示信息过少和password_hash问题，问题详情可见：  <a href="https://sourceforge.net/u/nihilisticz/phpldapadmin/ci/7e53dab990748c546b79f0610c3a7a58431e9ebc/#diff-1" target="_blank" rel="noopener">https://sourceforge.net/u/nihilisticz/phpldapadmin/ci/7e53dab990748c546b79f0610c3a7a58431e9ebc/#diff-1</a> ，建议下载最新版编译安装</li>
</ol>
<h3 id="LDAP客户端"><a href="#LDAP客户端" class="headerlink" title="LDAP客户端"></a>LDAP客户端</h3><p>sed可能无法成功替换，因为空格个数不定，需要自行手工检查</p>
<pre><code class="bash"># CentOS 7

yum -y install openldap-clients nss-pam-ldapd 
sed -i &#39;s/passwd:    files/passwd:\tfiles ldap/g&#39;  /etc/nsswitch.conf
sed -i &#39;s/group:     files/group:     files ldap/g&#39;  /etc/nsswitch.conf
sed -i &#39;s/shadow:    files/shadow:     files ldap/g&#39;  /etc/nsswitch.conf
systemctl restart nscd
systemctl restart nslcd
authconfig --enableldap --enableldapauth --ldapserver=ldap://192.168.209.139:389 --ldapbasedn=&quot;dc=sys,dc=com&quot; --enablemkhomedir --update
chkconfig nscd on
chkconfig nslcd on
sed -i &#39;s/UID_MAX   60000/UID_MAX       10000/g&#39;   /etc/login.defs
sed -i &#39;s/GID_MAX   60000/GID_MAX       10000/g&#39;   /etc/login.defs

# 修改PAM认证
mv /etc/pam.d/system-auth /etc/pam.d/system-auth.bak
mv /etc/pam.d/password-auth  /etc/pam.d/password-auth.bak

cat &gt;&gt; /etc/pam.d/system-auth &lt;&lt; EOF
#%PAM-1.0
# This file is auto-generated.
# User changes will be destroyed the next time authconfig is run.
auth        required      pam_env.so
auth        sufficient    pam_fprintd.so
auth        sufficient    pam_unix.so nullok try_first_pass
auth        requisite     pam_succeed_if.so uid &gt;= 500 quiet
auth        sufficient    pam_ldap.so use_first_pass
auth        required      pam_deny.so

account     required      pam_unix.so broken_shadow
account     sufficient    pam_localuser.so
account     sufficient    pam_succeed_if.so uid &lt; 500 quiet
account     [default=bad success=ok user_unknown=ignore] pam_ldap.so
account     required      pam_permit.so

password    requisite     pam_cracklib.so try_first_pass retry=3 type=
password    sufficient    pam_unix.so md5 shadow nullok try_first_pass use_authtok
password    sufficient    pam_ldap.so use_authtok
password    required      pam_deny.so

session     optional      pam_keyinit.so revoke
session     required      pam_limits.so
session     optional      pam_oddjob_mkhomedir.so skel=/etc/skel umask=0077
session     [success=1 default=ignore] pam_succeed_if.so service in crond quiet use_uid
session     required      pam_unix.so
session     optional      pam_ldap.so
EOF


cat &gt;&gt;  /etc/pam.d/password-auth &lt;&lt; EOF
#%PAM-1.0
# This file is auto-generated.
# User changes will be destroyed the next time authconfig is run.
auth        required      pam_env.so
auth        sufficient    pam_unix.so nullok try_first_pass
auth        requisite     pam_succeed_if.so uid &gt;= 500 quiet
auth        sufficient    pam_ldap.so use_first_pass
auth        required      pam_deny.so

account     required      pam_unix.so broken_shadow
account     sufficient    pam_localuser.so
account     sufficient    pam_succeed_if.so uid &lt; 500 quiet
account     [default=bad success=ok user_unknown=ignore] pam_ldap.so
account     required      pam_permit.so

password    requisite     pam_cracklib.so try_first_pass retry=3 type=
password    sufficient    pam_unix.so md5 shadow nullok try_first_pass use_authtok
password    sufficient    pam_ldap.so use_authtok
password    required      pam_deny.so

session     optional      pam_keyinit.so revoke
session     required      pam_limits.so
session     optional      pam_oddjob_mkhomedir.so skel=/etc/skel umask=0077
session     [success=1 default=ignore] pam_succeed_if.so service in crond quiet use_uid
session     required      pam_unix.so
session     optional      pam_ldap.so
EOF

echo &quot;AllowGroups root sysadmin&quot; &gt;&gt; /etc/ssh/sshd_config
systemctl restart sshd
</code></pre>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzAwMTY4ODA5NA==&amp;mid=2247483901&amp;idx=1&amp;sn=20c3b35774dc30577738bf6baabe9f61&amp;chksm=9ad4968cada31f9a0dfa16555afc58f3aa62506511ca5e3862542f803f8e49f38d2607b9f0cd&amp;mpshare=1&amp;scene=24&amp;srcid=0327J0ypWyirZErxB35h41Zi#rd" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzAwMTY4ODA5NA==&amp;mid=2247483901&amp;idx=1&amp;sn=20c3b35774dc30577738bf6baabe9f61&amp;chksm=9ad4968cada31f9a0dfa16555afc58f3aa62506511ca5e3862542f803f8e49f38d2607b9f0cd&amp;mpshare=1&amp;scene=24&amp;srcid=0327J0ypWyirZErxB35h41Zi#rd</a></p>
</li>
<li><p><a href="http://www.openldap.org/doc/admin24/quickstart.html" target="_blank" rel="noopener">http://www.openldap.org/doc/admin24/quickstart.html</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/netonline/p/7486832.html" target="_blank" rel="noopener">http://www.cnblogs.com/netonline/p/7486832.html</a></p>
</li>
<li><p><a href="http://blog.sina.com.cn/s/blog_8ea8e9d50102wul5.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_8ea8e9d50102wul5.html</a></p>
</li>
<li><p><a href="https://www.ibm.com/developerworks/cn/linux/1406_liulz_pamopenldap/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/linux/1406_liulz_pamopenldap/</a></p>
</li>
<li><a href="https://cloud.tencent.com/developer/article/1026304" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1026304</a></li>
</ul>

        
                <blockquote style="margin: 2em 0 0;padding: 0.5em 1em;border-left: 3px solid #F44336;background-color: #F5F5F5;list-style: none;">
                    <p><strong>
                         
                            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png"></a><br>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。
                        </strong>
                        <br>
                        <strong>本文链接：</strong><a href="https://leezj9671.github.io/20180329/LDAP安装和基本管理手记.html">https://leezj9671.github.io/20180329/LDAP安装和基本管理手记.html</a>
                    </p>
                </blockquote>
        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script>
    var gitalk = new Gitalk({
            clientID: 'ad451cc3feb9601c7fb1',
            clientSecret: '80a6439f8f871afa1e07a8a4a00d0aafce1f8494',
            repo: 'Leezj9671.github.io',
            owner: 'Leezj9671',
            admin: ['Leezj9671'],
            id: decodeURI(location.pathname),
            // facebook-like distraction free mode
            distractionFreeMode: false
        })
   gitalk.render('gitalk-container')
</script>
</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/20190404/新手友好的CTF靶场整理合集.html" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/20180319/OWASP Juice Shop writeup.html" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="n3ver's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        leezj9671@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: leezj9671@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/04/">四月 2019<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/02/">二月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">一月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">1</span></a>
            </li></ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/CTF/">CTF<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/Linux/">Linux<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/内网渗透/">内网渗透<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/前端/">前端<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/博客搭建/">博客搭建<span class="sidebar_archives-count">2</span></a>
            </li></ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">loyalty</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                时间轴
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">12</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material" class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/Leezj9671" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    
        <a href="https://www.zhihu.com/people/liyugui/activities" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-zhihu">
                <span class="visuallyhidden">Zhihu</span>
            </button><!--
     --></a>
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2017&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>NeverSec的博客 | 安全不止
            
                <br>
                
                    <a href="http://www.miitbeian.gov.cn" rel="nofollow">粤ICP备19002199号-1</a>
                
            

            
            <!-- All Site UV -->
            <br>
            <span id="busuanzi_container_site_uv">
                已经有<span id="busuanzi_value_site_uv"></span>个小伙伴来看过
            </span>|
            <span id="busuanzi_container_site_pv">
                总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>|
            
            本博客总字数<span class="post-count">18.9k</span>
        </div>
        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- GitTalk -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
